<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <title>Library SOA Frontend</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="bg-light">
<div class="container py-5">
    <h1 class="text-center mb-4">üìö Library Management (SOA)</h1>

    <ul class="nav nav-tabs mb-3">
        <li class="nav-item"><a class="nav-link active" data-bs-toggle="tab" href="#users">Ng∆∞·ªùi d√πng</a></li>
        <li class="nav-item"><a class="nav-link" data-bs-toggle="tab" href="#books">S√°ch</a></li>
        <li class="nav-item"><a class="nav-link" data-bs-toggle="tab" href="#borrows">M∆∞·ª£n s√°ch</a></li>
    </ul>

    <div class="tab-content">
        <div class="tab-pane fade show active" id="users">
            <h4>Danh s√°ch ng∆∞·ªùi d√πng</h4>
            <ul id="user-list" class="list-group"></ul>
        </div>

        <div class="tab-pane fade" id="books">
            <h4>Danh s√°ch s√°ch</h4>
            <ul id="book-list" class="list-group"></ul>
        </div>

        <div class="tab-pane fade" id="borrows">
            <h4>Danh s√°ch m∆∞·ª£n s√°ch</h4>
            <ul id="borrow-list" class="list-group"></ul>
        </div>
    </div>
</div>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
<script>
    async function loadUsers() {
    const res = await fetch('/api/user/users/');
    const data = await res.json();
    const list = document.getElementById('user-list');
    list.innerHTML = '';
    data.forEach(u => {
        list.innerHTML += `<li class="list-group-item">${u.username} (${u.email})</li>`;
    });
    }

    async function loadBooks() {
    const res = await fetch('/api/book/books/');
    const data = await res.json();
    const list = document.getElementById('book-list');
    list.innerHTML = '';
    data.forEach(b => {
        const status = b.available ? '‚úÖ C√≤n' : '‚ùå H·∫øt';
        list.innerHTML += `<li class="list-group-item">${b.title} - ${b.author} (${status})</li>`;
    });
}

    async function loadBorrows() {
    const res = await fetch('/api/borrow/borrows/');
    const data = await res.json();
    const list = document.getElementById('borrow-list');
    list.innerHTML = '';
    data.forEach(br => {
        list.innerHTML += `<li class="list-group-item">
            User ID: ${br.user} | Book ID: ${br.book} | Borrow: ${br.borrow_date} | Return: ${br.return_date || 'Ch∆∞a tr·∫£'}
        </li>`;
    });
}
loadUsers();
loadBooks();
loadBorrows();
</script>
</body>
</html>    